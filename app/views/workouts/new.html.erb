<div class="flex justify-between items-center">
  <%= link_to "Back", workouts_path, class: "
    inline-flex items-center gap-2
    px-4 py-2
    text-sm font-medium
    text-gray-700
    bg-white
    border border-gray-300
    rounded-md
    hover:bg-gray-50
    active:bg-gray-100
    transition
  " %>
</div>

<div class="mt-6 mb-8">
  <div class="mb-4">
    <h1 class="text-4xl font-semibold">
      Starting workout: <%= @workout.workout_plan.name %>
    </h1>
    <p class="text-gray-600">
      Date: <%= @workout.workout_date %>
    </p>
  </div>

  <%= simple_form_for @workout,
        url: workout_plan_workouts_path(@workout.workout_plan) do |f| %>

    <%= f.error_notification %>

    <%= f.simple_fields_for :workout_exercises do |we_fields| %>
      <% we = we_fields.object %>

      <div class="border rounded-lg p-4 mb-6 bg-white shadow-sm">
        <h2 class="font-semibold text-xl mb-4">
          <%= we.exercise.name %>
        </h2>

        <!-- keep exercise + position tied to the record -->
        <%= we_fields.hidden_field :exercise_id %>
        <%= we_fields.hidden_field :position %>

        <div class="space-y-4">
          <%= we_fields.simple_fields_for :workout_sets do |set_fields| %>
            <div class="grid grid-cols-3 gap-4 items-end">
              <div>
                <%= set_fields.input :set_number,
                      label: "Set",
                      input_html: { readonly: true },
                      wrapper_html: { class: "opacity-70" } %>
              </div>

              <div>
                <%= set_fields.input :reps,
                      label: "Reps",
                      input_html: { placeholder: "0" } %>
              </div>

              <div>
                <%= set_fields.input :weight_kg,
                      label: "Weight (kg)",
                      input_html: { placeholder: "0" } %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <div class="mt-6">
      <%= f.submit "Save Workout",
            class: "
              px-6 py-3
              bg-blue-600 text-white
              rounded-lg font-medium
              hover:bg-blue-700
              active:bg-blue-800
              transition
            " %>
    </div>

  <% end %>
</div>