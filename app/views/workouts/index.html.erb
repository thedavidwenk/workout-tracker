<div>
  <h1 class="text-3xl font-bold mb-4">My Workouts</h1>

  <% @workouts.each do |workout| %>
    <div class="relative border rounded-lg p-4 mb-4">

      <!-- Delete icon (top-right) -->
      <div class="absolute top-4 right-4">
        <%= button_to workout_path(workout),
                      method: :delete,
                      data: { turbo_confirm: "Are you sure?" },
                      form: { class: "inline-block" } do %>
          <%= icon "trash", class: "w-5 h-5 text-gray-500 hover:text-red-600" %>
        <% end %>
      </div>

      <!-- Title + Date (top-left) -->
      <div class="mb-2 pr-10"> 
        <h2 class="font-semibold text-xl">
          <%= workout.workout_plan.name %>
        </h2>
        <p class="text-gray-600">
          <%= l workout.workout_date, format: :long %>
        </p>
      </div>


      <!-- Exercises + sets -->
      <div class="flex space-x-8 overflow-x-auto pb-2">
        <% workout.workout_exercises.order(:position).each do |we| %>
          <div class="mt-3">
            <p class="font-medium"><%= we.exercise.name %></p>

            <ul class="text-sm text-gray-700 ml-2">
              <% we.workout_sets.order(:set_number).each do |set| %>
                <li>
                  Set <%= set.set_number %>:
                  <% if set.reps.present? || set.weight_kg.present? %>
                    <%= set.reps || "-" %> reps @ <%= set.weight_kg || "-" %> kg
                  <% else %>
                    (not logged)
                  <% end %>
                </li>
              <% end %>
            </ul>
          </div>
        <% end %>

      </div>

      <!-- Open link (bottom-right) -->
      <div class="flex justify-end mt-4">
        <%= link_to "Open",
                    workout_path(workout),
                    class: "text-sm text-blue-600 underline" %>
      </div>

    </div>
  <% end %>
</div>